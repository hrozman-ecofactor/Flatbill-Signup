<!doctype html>
<html lang="en" data-wf-domain="flat-rage-billing.thesimple.com">
<head>
    <title>Simple - Flat Bill</title>
    <meta content="UKXL8aIXWa3dE8hr36fqVj2HeUjGI2AMbL97uPRYr-E" name="google-site-verification"/>
    <meta content="Webflow" name="generator"/>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- From original thesimple.com website -->
    <link href="https://daks2k3a4ib2z.cloudfront.net/594acebf03437f1a14504b3f/css/thesimple.webflow.3498c3b89.min.css" rel="stylesheet" type="text/css"/>
    <!-- From FlatBill stage example -->
    <link href="https://uploads-ssl.webflow.com/594acebf03437f1a14504b3f/css/thesimple.webflow.edc86382c.min.css" rel="stylesheet" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Source Sans Pro:300,300italic,regular,600,600italic,700,700italic"]  }});</script>
    <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif]-->
    <script>!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
    <link href="https://daks2k3a4ib2z.cloudfront.net/594acebf03437f1a14504b3f/5a09fa38e1339f0001a86a9e_favicon-simple-32.ico" rel="shortcut icon" type="image/x-icon"/>
    <link href="https://daks2k3a4ib2z.cloudfront.net/594acebf03437f1a14504b3f/59966e1dab717100012b7956_simple-logo-link.png" rel="apple-touch-icon"/>
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-107304173-1', 'auto');ga('send', 'pageview');</script>
    <script>
        var DEBUG_MODE = false;
        //DEBUG_MODE = true; // Allow local debugging

        var FORM_TYPE_SIGNUP = "signUp";
        //var URL_FLAT_BILL_LANDING = "https://thesimple.webflow.io/dummy-flatbill-landing"; // Test dummy page
        //var URL_FLAT_BILL_LANDING = "https://thesimple.webflow.io/flat-bill"; // Stage env
        var URL_FLAT_BILL_LANDING = "https://www.thesimple.com/flat-bill"; // Prod env
        //var URL_FLAT_BILL_THANKS = "https://thesimple.webflow.io/dummy-flatbill-thank-you"; // Test dummy page
        //var URL_FLAT_BILL_THANKS = "https://thesimple.webflow.io/flatbill-thank-you"; // Stage env
        var URL_FLAT_BILL_THANKS = "https://www.thesimple.com/flat-bill-thank-you"; // Prod env
        //var URL_FLAT_BILL_SIGNUP = "https://flatbill.thesimple.com/pilot/signup";
        var URL_FLAT_BILL_SIGNUP = "https://flatbill.thesimple.com/site/signup";
        var XHR_TS = new xhrCreateRequest();

        function debug_ShowJsonResponse(XhrResponse) {
            console.log('[ERROR] Ajax Response:');
            console.log('Raw Data:');
            console.dir(XhrResponse);
        };
        function xhrCreateRequest() {
            // This function will create the AJAX object...
            var XHRObject;
            if (window.ActivateObject) { // We have IE...
                try {
                    XHRObject = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {
                    XHRObject = false;
                } // End catch(e)...
            } else { // We have Chrome, Firefox, Opera, etc...
                try {
                    XHRObject = new XMLHttpRequest();
                } catch (e) {
                    XHRObject = false;
                } // End catch(e)...
            } // End else()...
            if (XHRObject === false) {
                alert("[ERROR] xhrCreateRequest() - Failed to create XMLHttpRequest object.");
            } else {
                return XHRObject;
            } // End else...
        };
        function xhrRunAjax(xhrMethod, xhrUrl, xhrJsonBody) {
            if (xhrMethod !== "POST" && xhrMethod !== "GET") {
                alert("[ERROR] xhrRunAjax()\n\nInvalid Method:  " + xhrMethod);
                return;
            } // End if...
            var useAsync = true;   // Non-Async is deprecated...
            if (XHR_TS.readyState === 0 || XHR_TS.readyState === 4) {
                // Set the function which will handle the Ajax response...
                XHR_TS.onreadystatechange = xhrHandleResponse;
                // Open the connection...
                XHR_TS.open(xhrMethod, xhrUrl, useAsync);
                // Set the header, so that it allows parameters to be passed...
                XHR_TS.setRequestHeader("Content-Type", "application/json");
                // Send the request, with POST JSON Body...
                XHR_TS.send(xhrJsonBody);
            } else {
                setTimeout('runAjax(\"' + xhrMethod + '\", \"' + xhrUrl + '\")', 1000);  // Wait for 1 second...
            } // End else...
        };
        function xhrHandleResponse() {
            if (XHR_TS.readyState === 4) { // Response is ready and done communicating...
                if (XHR_TS.status === 200) { // Successful, No errors...
                    if(DEBUG_MODE) {
                        debug_ShowJsonResponse(XHR_TS);
                    } else {
                        gotoPage(URL_FLAT_BILL_THANKS);
                    }
                } else {    // We had some error...
                    var errorStr = XHR_TS.statusText;
                    if (XHR_TS.status === 0)
                        errorStr = "Cross-Site (Access Denied)  " + URL_FLAT_BILL_SIGNUP;
                    if (DEBUG_MODE) {
                        alert("[ERROR] xhrHandleResponse()\n\nFailed AJAX Response: " + XHR_TS.status + " - " + errorStr);
                        debug_ShowJsonResponse(XHR_TS);
                    }
                } // End else(status === 200)...
            } // End else(readystate === 4)...
        };
        function div_setVisible(divName, isVisible, divVisibleStyle) {
            d = document.getElementById(divName);
            if(d) {
                if(isVisible == false) {
                    d.style.display = 'none';
                    }
                else {
                    d.style.display = divVisibleStyle;
                    };
                };
        };
        function gotoPage(PageUrl) {
            if(PageUrl) {
                if(DEBUG_MODE == true)
                    window.location.href = PageUrl; // Allows back button to be used after POST
                else
                    window.location.replace(PageUrl); // Disables back button after POST
                };
        };
        function init_signUp() {
            div_setVisible('divForm_SignUp', true, 'block');
            div_setVisible('div_signUp_compatible_isVerified_fixme', false, 'inline');
            div_setVisible('div_signUp_total_thermostats_needed_fixme', false, 'inline');
            div_setVisible('div_signUp_thermostat_color_fixme', false, 'inline');
            div_setVisible('div_signUp_has_wifi_100_pct_fixme', false, 'inline');
            div_setVisible('div_signUp_has_central_ac_fixme', false, 'inline');
            //div_setVisible('div_signUp_utility_isCustomer_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_provider_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_login_userId_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_password_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_password_repeat_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_firstName_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_lastName_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_location_address1_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_location_address2_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_location_city_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_location_state_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_location_zipcode_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_phone_fixme', false, 'inline');
            div_setVisible('div_signUp_utility_email_fixme', false, 'inline');
            //div_setVisible('div_signUp_utility_levelPayToday_heardOf_fixme', false, 'inline');
            //div_setVisible('div_signUp_utility_levelPayToday_isMember_fixme', false, 'inline');
            //div_setVisible('div_signUp_soCal_isCustomer_fixme', false, 'inline');
            //div_setVisible('div_signUp_soCal_gasNumber_fixme', false, 'inline');
            div_setVisible('div_signUp_mostExcited_fixme', false, 'inline');
            //div_setVisible('div_signUp_recommendToOthers_fixme', false, 'inline');
            //div_setVisible('div_signUp_offerToOthers_fixme', false, 'inline');
            div_setVisible('div_signUp_legal_accepted_fixme', false, 'inline');
        };
        function submit_cancel() {
            gotoPage(URL_FLAT_BILL_SIGNUP);
        };
        function validateAndGetUserInput(dataElementId, dataType, allowEmptyData) {
            var validInput = true;
            dataElementId_fixme = 'div_' + dataElementId + '_fixme';
            //if(DEBUG_MODE) { console.log('DataElementId_FixMe:  ' + dataElementId_fixme); };
            e = document.getElementById(dataElementId);
            if(dataType == 'select') {
                v = e.options[e.selectedIndex].value;
                if(v == '---') {
                    v = '';
                }
            } else if(dataType == 'textbox_email') {
                v = e.value;
                if(v == '---') {
                    v = '';
                } else {
                    // Taken from:  https://www.w3resource.com/javascript/form/email-validation.php
                    // It doesn't allow '+' in the email address
                    //if((/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(v)) == false) {
                    //    validInput = false;
                    //}
                    // From: https://stackoverflow.com/questions/46155/how-can-you-validate-an-email-address-in-javascript/38544440#38544440
                    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    validInput = re.test(v);
                }
            } else if(dataType == 'checkbox') {
                v = e.checked;
                if(allowEmptyData == false) {
                    if(v == false) {
                        validInput = false;
                    }
                }
            } else {
                v = e.value;
                if(v == '---') {
                    v = '';
                }
            }
            if(v == '') {
                if(allowEmptyData == false)
                    validInput = false;
            }
            if(validInput == false)
                div_setVisible(dataElementId_fixme, true, 'inline');
            else
                div_setVisible(dataElementId_fixme, false, 'inline');
            return [v, validInput];
        };
        function submit_signUp() {
            validUserData = true;
            passwordsMatch = true;
            // UTC date (used by submission date)
            d = new Date();
            var dYear = '' + d.getUTCFullYear(),
                dMonth = '' + (d.getUTCMonth()+1),
                dDay = '' + d.getUTCDate(),
                dHour = '' + d.getUTCHours(),
                dMin = '' + d.getUTCMinutes(),
                dSec = '' + d.getUTCSeconds(),
                dMilliSec = '' + d.getUTCMilliseconds()
                ;
            if(dMonth.length < 2) dMonth = '0' + dMonth;
            if(dDay.length < 2) dDay = '0' + dDay;
            if(dHour.length < 2) dHour = '0' + dHour;
            if(dMin.length < 2) dMin = '0' + dMin;
            if(dSec.length < 2) dSec = '0' + dSec;
            sUtcNow = dYear + "-" + dMonth + "-" + dDay + " " +
                dHour + ":" + dMin + ":" + dSec + "." + dMilliSec +
                " GMT+0";

            // signUp_total_thermostats_needed
            results = validateAndGetUserInput('signUp_total_thermostats_needed', 'select', false);
            sTotalThermostatsNeeded = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_thermostat_color
            results = validateAndGetUserInput('signUp_thermostat_color', 'select', false);
            sThermostatColor = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_has_wifi_100_pct
            results = validateAndGetUserInput('signUp_has_wifi_100_pct', 'select', false);
            sWifiConnectivity = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;
            bWifiConnectivity = false;
            if(sWifiConnectivity == "yes")
                bWifiConnectivity = true;

            // signUp_has_central_ac
            results = validateAndGetUserInput('signUp_has_central_ac', 'select', false);
            sCentralAc = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;
            bCentralAc = false;
            if(sCentralAc == "yes")
                bCentralAc = true;

            // signUp_utility_provider
            results = validateAndGetUserInput('signUp_utility_provider', 'textbox', false);
            utility_provider = document.getElementById('signUp_utility_provider');
            if (utility_provider.value === "Other") {
              sUtilityProvider = document.getElementById('utility_other').value;
              isValid = results[1] && sUtilityProvider !== "";
            } else {
              sUtilityProvider = results[0];
              isValid = results[1];
            }
            if(isValid == false)
              validUserData = false;

            // signUp_utility_login_userId
            results = validateAndGetUserInput('signUp_utility_login_userId', 'textbox', false);
            sUtilityLoginUserId = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_password
            results = validateAndGetUserInput('signUp_utility_password', 'textbox_password', false);
            sUtilityPassword = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_password_repeat
            results = validateAndGetUserInput('signUp_utility_password_repeat', 'textbox_password', false);
            sUtilityPasswordRepeat = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // Make sure that passwords match
            if(sUtilityPassword == sUtilityPasswordRepeat) {
                passwordsMatch = true;
            } else {
                if(DEBUG_MODE)
                    console.log("[DEBUG] Passwords don't match.\nP1:  " + sUtilityPassword + "\nP2:  " + sUtilityPasswordRepeat);
                validUserData = false;
                passwordsMatch = false;
                div_setVisible('div_signUp_utility_password_fixme', true, 'inline');
                div_setVisible('div_signUp_utility_password_repeat_fixme', true, 'inline');
            }

            // signUp_utility_firstName
            results = validateAndGetUserInput('signUp_utility_firstName', 'textbox', false);
            sUtilityFirstName = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_lastName
            results = validateAndGetUserInput('signUp_utility_lastName', 'textbox', false);
            sUtilityLastName = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_location_address1
            results = validateAndGetUserInput('signUp_utility_location_address1', 'textbox', false);
            sUtilityLocationAddress1 = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_location_address2
            results = validateAndGetUserInput('signUp_utility_location_address2', 'textbox', true);
            sUtilityLocationAddress2 = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_location_city
            results = validateAndGetUserInput('signUp_utility_location_city', 'textbox', false);
            sUtilityLocationCity = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_location_state
            results = validateAndGetUserInput('signUp_utility_location_state', 'textbox', false);
            sUtilityLocationState = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_location_zipcode
            results = validateAndGetUserInput('signUp_utility_location_zipcode', 'textbox', false);
            sUtilityLocationZipcode = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_phone
            results = validateAndGetUserInput('signUp_utility_phone', 'textbox', false);
            sUtilityPhone = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_utility_email
            results = validateAndGetUserInput('signUp_utility_email', 'textbox_email', false);
            sUtilityEmail = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_mostExcited
            results = validateAndGetUserInput('signUp_mostExcited', 'select', false);
            sMostExcited = results[0];
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // signUp_legal_accepted
            // We don't need to save any data, but just make sure that they check the checkbox
            results = validateAndGetUserInput('signUp_legal_accepted', 'checkbox', false);
            isValid = results[1];
            if(isValid == false)
                validUserData = false;

            // Build the json object to submit
            joDetails = {
                "submissionDate": sUtcNow,
                "submissionType": FORM_TYPE_SIGNUP,
//                "compatible_isVerified": bCompatibleIsVerified,
                "total_thermostats_needed": sTotalThermostatsNeeded,
                "thermostat_color": sThermostatColor,
                "hasWifiConnectivity": bWifiConnectivity,
                "hasCentralAc": bCentralAc,
                "utility_provider": sUtilityProvider,
                "utility_login_userId": sUtilityLoginUserId,
                "utility_password": sUtilityPassword,
                "utility_firstName": sUtilityFirstName,
                "utility_lastName": sUtilityLastName,
                "utility_location_address1": sUtilityLocationAddress1,
                "utility_location_address2": sUtilityLocationAddress2,
                "utility_location_city": sUtilityLocationCity,
                "utility_location_state": sUtilityLocationState,
                "utility_location_zipcode": sUtilityLocationZipcode,
                "utility_phone": sUtilityPhone,
                "utility_email": sUtilityEmail,
                "mostExcited": sMostExcited
                };
            if(DEBUG_MODE) {
                console.log("[DEBUG] Submission (signup):");
                console.dir(joDetails);
            }
            if(validUserData) {
                if(DEBUG_MODE != true) {
                    xhrRunAjax("POST", URL_FLAT_BILL_SIGNUP, JSON.stringify(joDetails));
                    }
            } else {
                msgInvalid = "Please provide valid input for all questions.  Look for the 'Fix Me' text which indicates the data which needs corrections.";
                if(passwordsMatch == false)
                    msg = msgInvalid + "\n\nPasswords don't match."
                else
                msg = msgInvalid
                alert(msg);
            }
        };

        function link_utility_account() {
            var modal = document.getElementById('myModal');
            modal.style.display = "block";
        };

        function close_modal() {
            var modal = document.getElementById('myModal');
            modal.style.display = "none";
        };

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            var modal = document.getElementById('myModal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        };

        function check_utility() {
          var utility_name = document.getElementById('signUp_utility_provider');
          var utility_div = document.getElementById('utility_div');

          if (utility_name.value === "Other") {
            var text_field = document.createElement("input");
            text_field.type = "text";
            text_field.id = "utility_other";
            text_field.maxlength = "30";
            text_field.setAttribute("onkeyup", "toggle_utility_done_button();");
            utility_div.appendChild(text_field);
          } else {
            var other_textbox = document.getElementById('utility_other');
            if (other_textbox)
              utility_div.removeChild(other_textbox);
          }
          toggle_utility_done_button();
        };

        function toggle_utility_done_button() {
          var validUserData = true;
          var passwordsMatch = true;

          // signUp_utility_provider
          results = validateAndGetUserInput('signUp_utility_provider', 'textbox', false);
          utility_provider = document.getElementById('signUp_utility_provider');
          if (utility_provider.value === "Other") {
            sUtilityProvider = document.getElementById('utility_other').value;
            isValid = results[1] && sUtilityProvider !== "";
          } else {
            sUtilityProvider = results[0];
            isValid = results[1];
          }
          if(isValid == false)
              validUserData = false;

          // signUp_utility_login_userId
          results = validateAndGetUserInput('signUp_utility_login_userId', 'textbox', false);
          sUtilityLoginUserId = results[0];
          isValid = results[1];
          if(isValid == false)
              validUserData = false;

          // signUp_utility_password
          results = validateAndGetUserInput('signUp_utility_password', 'textbox_password', false);
          sUtilityPassword = results[0];
          isValid = results[1];
          if(isValid == false)
              validUserData = false;

          // signUp_utility_password_repeat
          results = validateAndGetUserInput('signUp_utility_password_repeat', 'textbox_password', false);
          sUtilityPasswordRepeat = results[0];
          isValid = results[1];
          if(isValid == false)
              validUserData = false;

          // Make sure that passwords match
          if(sUtilityPassword == sUtilityPasswordRepeat) {
              passwordsMatch = true;
              match_text = document.getElementById('do_not_match_label');
              match_text.innerHTML = '';
          } else {
              if(DEBUG_MODE)
                  console.log("[DEBUG] Passwords don't match.\nP1:  " + sUtilityPassword + "\nP2:  " + sUtilityPasswordRepeat);
              validUserData = false;
              passwordsMatch = false;
              match_text = document.getElementById('do_not_match_label');
              match_text.innerHTML = 'Passwords do not match';
          }

          var done_button = document.getElementById('btn_utility_done');
          var btnModalContainer = document.getElementById('btnModalLinkContainer');

          if (validUserData) {
            done_button.classList.remove('disabled');
            btnModalContainer.classList.remove('disabled');
            done_button.disabled = false;
          } else {
            done_button.classList.add('disabled');
            btnModalContainer.classList.add('disabled');
            done_button.disabled = true;
          }
        };

        function toggle_enroll_button(element) {
            var element_id = element.id;
            var error_msg = "";

            var validUserData = true;
            var passwordsMatch = true;

            // signUp_utility_provider
            results = validateAndGetUserInput('signUp_utility_provider', 'textbox', false);

            utility_provider = document.getElementById('signUp_utility_provider');
            if (utility_provider.value === "Other") {
              sUtilityProvider = document.getElementById('utility_other').value;
              isValid = results[1] && sUtilityProvider !== "";
            } else {
              sUtilityProvider = results[0];
              isValid = results[1];
            }
            if(isValid == false)
                validUserData = false;

            // signUp_utility_login_userId
            results = validateAndGetUserInput('signUp_utility_login_userId', 'textbox', false);
            sUtilityLoginUserId = results[0];
            isValid = results[1];
            if(isValid === false)
                validUserData = false;

            // signUp_utility_password
            results = validateAndGetUserInput('signUp_utility_password', 'textbox_password', false);
            sUtilityPassword = results[0];
            isValid = results[1];
            if(isValid === false)
                validUserData = false;

            // signUp_utility_password_repeat
            results = validateAndGetUserInput('signUp_utility_password_repeat', 'textbox_password', false);
            sUtilityPasswordRepeat = results[0];
            isValid = results[1];
            if(isValid === false)
                validUserData = false;

            // Make sure that passwords match
            if(sUtilityPassword === sUtilityPasswordRepeat) {
                passwordsMatch = true;
            } else {
                if(DEBUG_MODE)
                    console.log("[DEBUG] Passwords don't match.\nP1:  " + sUtilityPassword + "\nP2:  " + sUtilityPasswordRepeat);
                validUserData = false;
                passwordsMatch = false;
                div_setVisible('div_signUp_utility_password_fixme', true, 'inline');
                div_setVisible('div_signUp_utility_password_repeat_fixme', true, 'inline');
            }

            // signUp_utility_firstName
            results = validateAndGetUserInput('signUp_utility_firstName', 'textbox', false);
            sUtilityFirstName = results[0];
            isValid = results[1];
            if(isValid === false || sUtilityFirstName === "") {
                validUserData = false;
                if (element_id === "signUp_utility_firstName")
                    error_msg = "Please enter a first name"
            }

            // signUp_utility_lastName
            results = validateAndGetUserInput('signUp_utility_lastName', 'textbox', false);
            sUtilityLastName = results[0];
            isValid = results[1];
            if(isValid === false || sUtilityLastName === "") {
                validUserData = false;
                if (element_id === "signUp_utility_lastName")
                    error_msg = "Please enter a last name"
            }

            // signUp_utility_location_address1
            results = validateAndGetUserInput('signUp_utility_location_address1', 'textbox', false);
            sUtilityLocationAddress1 = results[0];
            isValid = results[1];
            if(isValid === false || sUtilityLocationAddress1 === "") {
                validUserData = false;
                if (element_id === "signUp_utility_location_address1")
                    error_msg = "Please enter an address"
            }

            // signUp_utility_location_address2
            results = validateAndGetUserInput('signUp_utility_location_address2', 'textbox', true);
            sUtilityLocationAddress2 = results[0];
            isValid = results[1];
            if(isValid === false)
                validUserData = false;

            // signUp_utility_location_city
            results = validateAndGetUserInput('signUp_utility_location_city', 'textbox', false);
            sUtilityLocationCity = results[0];
            isValid = results[1];
            if(isValid === false || sUtilityLocationCity === "") {
                validUserData = false;
                if (element_id === "signUp_utility_location_city")
                    error_msg = "Please enter a valid city"
            }

            // signUp_utility_location_state
            results = validateAndGetUserInput('signUp_utility_location_state', 'textbox', false);
            sUtilityLocationState = results[0];
            isValid = results[1];
            if(isValid === false) {
                validUserData = false;
                if (element_id === "signUp_utility_location_state")
                    error_msg = "Please select one"
            }

            // signUp_utility_location_zipcode
            results = validateAndGetUserInput('signUp_utility_location_zipcode', 'textbox', false);
            sUtilityLocationZipcode = results[0];
            isValid = results[1];
            pattern = new RegExp("^\\d{5}(?:[-\\s]\\d{4})?$");
            if(isValid === false || sUtilityLocationZipcode === "" || !pattern.test(sUtilityLocationZipcode)) {
                validUserData = false;
                if (element_id === "signUp_utility_location_zipcode")
                    error_msg = "Please enter a valid zip"
            }

            // signUp_utility_phone
            results = validateAndGetUserInput('signUp_utility_phone', 'textbox', false);
            sUtilityPhone = results[0];
            isValid = results[1];
            pattern = new RegExp("^(?:\\+?1\\s?)?(:?\\([0-9]{3}\\)|[0-9]{3})[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4}$");
            if(isValid === false || sUtilityPhone === "" || !pattern.test(sUtilityPhone)) {
                validUserData = false;
                if (element_id === "signUp_utility_phone")
                    error_msg = "Please enter a valid phone number"
            }

            // signUp_utility_email
            results = validateAndGetUserInput('signUp_utility_email', 'textbox_email', false);
            sUtilityEmail = results[0];
            isValid = results[1];
            if(isValid === false || sUtilityEmail === "") {
                validUserData = false;
                if (element_id === "signUp_utility_email")
                    error_msg = "Please enter a valid email"
            }

            // signUp_mostExcited
            results = validateAndGetUserInput('signUp_mostExcited', 'select', false);
            sMostExcited = results[0];
            isValid = results[1];
            if(isValid === false) {
                validUserData = false;
                if (element_id === "signUp_mostExcited")
                    error_msg = "Please select one"
            }

            // signUp_legal_accepted
            // We don't need to save any data, but just make sure that they check the checkbox
            results = validateAndGetUserInput('signUp_legal_accepted', 'checkbox', false);
            isValid = results[1];
            if(isValid === false)
                validUserData = false;

            var enroll_button = document.getElementById('btn_signup_enroll');
            var btnEnrollContainer = document.getElementById('btnEnrollContainer');

            if (validUserData) {
              enroll_button.classList.remove('disabled');
              btnEnrollContainer.classList.remove('disabled');

              enroll_button.disabled = false;
              showErrorMessage(element_id, "");
            } else {
                showErrorMessage(element_id, error_msg);
              enroll_button.classList.add('disabled');
              btnEnrollContainer.classList.add('disabled');
              enroll_button.disabled = true;
            }
        };

        function validate_first_page_info() {
            var numOfThermostats = document.getElementById('signUp_total_thermostats_needed');
            var colorOfThermostat = document.getElementById('signUp_thermostat_color');
            var hasWifi = document.getElementById('signUp_has_wifi_100_pct');
            var hasAC = document.getElementById('signUp_has_central_ac');

            if (numOfThermostats.options[numOfThermostats.selectedIndex].value !== "" &&
                colorOfThermostat.options[colorOfThermostat.selectedIndex].value !== "" &&
                hasWifi.options[hasWifi.selectedIndex].value === "yes" &&
                hasAC.options[hasAC.selectedIndex].value === "yes" &&
                !numOfThermostats.disabled && !colorOfThermostat.disabled && !hasWifi.disabled && !hasAC.disabled) {
                document.getElementById("btnNextPage").disabled = false;
                document.getElementById("btnNextPageContainer").classList.remove("disabled");
            } else {
                document.getElementById("btnNextPage").disabled = true;
                document.getElementById("btnNextPageContainer").classList.add("disabled");
            }
        }

        function clear_link_account_error() {
            var lblLinkUtilityError = document.getElementById('div-link-utility-error');
            lblLinkUtilityError.style.visibility = "hidden";
        }
    </script>
    <style>
        .fixMe {
            font-style: italic;
            color: red;
            font-weight: 600;
            padding: 3px;
            padding-left: 5px;
            padding-right: 5px;
            display: none; /* Options are: none, block, or inline */
            /* Unused styles
            display: inline;
            visibility: visible;
            background-color: pink;
            */
        }
        .divSignup {
            padding: 53px;
        }

        .narrowBox {
  max-width: 450px;
  margin: 1em auto;
  text-align:center;
}

.effield {
    padding: 0 1px;
    text-align: left;
    margin-bottom: 5px;
}

.effieldlabel {
  margin: 0 -2px 0 0;
  padding: 0;
  display: block;

}

.effieldlabel.formLabel {
    float: left;
}

.effieldlabel_password {
  margin: 0 -2px 0 0;
  padding: 0;
  display: inline-block;
}

.effieldlabel_password_match {
  color: red;
  margin: 0 -2px 0 0;
  padding: 0;
  display: inline-block;
}

.requiredFieldFlag {
  display: inline-block;
  width: .6em;
  margin-left: 2px;
}

.efCheckboxStyleLabel {
  padding: 0 4px;
  display: inline-block;
}

a {
  color: #008c99;
}

a:hover, a:focus {
  color: #1db5c4;
}

label {
  display: block;
  letter-spacing: .01rem;
  margin-bottom: .5rem;
  font-size: 85%;
  color: #5F5F5F;
  font-weight: 400;
}

input {
  margin-top: .1rem;
  margin-bottom: .1rem;
}

input[type=text], input[type=tel], input[type=email], input[type=password], select {
  height: 30px;
  width: 99.5%;
  padding: 6px 8px;
  background-color: #fff;
  border-radius: 4px;
  border: 1px solid #ccc;
  box-shadow: none;
}

input[type=text]:disabled, input[type=tel]:disabled, input[type=email]:disabled, input[type=password]:disabled, select:disabled {
  background-color: #ebebeb;
  color:#a6a6a6;
}

select {
  margin-top: .1rem;
  margin-bottom: .1rem;
  text-transform: none;
}

input[type=checkbox] {
  margin-bottom: 1rem;
  display: inline;
  box-sizing: border-box;
  padding: 0;
}
/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  padding: 20px;
  border: 1px solid #888;
  max-width: 450px;
  margin: 1em auto;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
.light-button {
  font: 18px Arial;
  letter-spacing: .2px;
  text-decoration: none;
  display: inline-block;
  margin: 0 3px;
  padding: 7px 16px 7px;
  border: 1px solid transparent;
  color: #008c99;
  background-color: #edf7f7;
  border-radius: 1px;
}
.dark-button {
  font: 18px Arial;
  letter-spacing: .2px;
  text-decoration: none;
  display: inline-block;
  margin: 0 3px;
  padding: 7px 16px 7px;
  border: 1px solid transparent;
  color: #fff;
  background-color: #008c99;
  border-color: #008c99;
}

/* Hide all steps by default: */
.tab, #section-TC, #section-LinkUtility, #divButtonSubmissions_signUp {
  display: none;
}

.disabled-button {
  font: 18px Arial;
  letter-spacing: .2px;
  text-decoration: none;
  display: inline-block;
  margin: 0 3px;
  padding: 7px 16px 7px;
  border: none;
  color: #a6a6a6;
  background-color: #ebebeb;
  box-shadow: 0 0 0 0 #bbb;
}

#section-header label, #section-subheader label {
    font-weight: 600;
    font-size: 17px;
    text-align: left;
}

#section-header {
  border-bottom: solid #5F5F5F;
  border-width: 1px;

}

#section-subheader {
  margin: 20px 0;
}

#div-goToNextPage {
  margin-top: 20px;
}

.efbuttonfield {
  background-color: #008c99;
  color: #fff;
  border-radius: 4px;
  padding: 5px;
}

.efbuttonfield.disabled {
  background-color: #ebebeb;
  color:#a6a6a6;
}

.efbuttonfield button {
  background-color: transparent;
}

.selectFirstPage {

}

.col-9 {
  width: 75%;
  float: left;
}

.col-3 {
  width: 25%;
  float: left;
}

.col-6 {
    width: 50%;
    float: left;
}

#btnNextPageContainer {
  margin-top: 15px;
}

#btnEnrollContainer, #btnCancelContainer, #btnLinkUtilityContainer, #btnModalLinkContainer, #btnModalCancelContainer {
  display: inline-block;
}

#btnEnrollContainer, #btnCancelContainer {
  text-align: center;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px 15px 20px 15px;
  min-width: 100px;
}

#btnLinkUtilityContainer {
    float: right;
}


#section-LinkUtility {
  margin: 20px 0;
}

#section-TC {
    padding-top: 15px;
}

#section-TC .effield {
  text-align: center;
}

#btnModalLinkContainer {
  margin-top: 20px;
  padding-left: 10px;
  padding-right: 10px;
  background-color: #008c99;
  color: #fff;
}

#btnModalCancelContainer {
  color: #000;
  background-color: #ebebeb;
}

#btnModalLinkContainer, #btnModalCancelContainer {
  margin-left: 5px;
  margin-right: 5px;
}

#btn_signup_enroll:disabled, #btn_utility_done:disabled, #btnModalLinkContainer.disabled {
    color: #a6a6a6;
    background-color: #ebebeb;
}

#section-header .section-header-sub label {
    font-size: 14px;
}

#btn_signup_cancel, #btnCancelContainer {
    color: #000;
    background-color: #ebebeb;
    cursor: pointer;
}

.lbl-error-msg {
    color: red;
    float: left;
    display: inline;
    margin-bottom: 0;
    margin-left: 15px;
}

#div-link-utility-label {
  margin-bottom: 0;
}

#div-link-utility-error label {
  color: red;
}

select {
  padding-top: 0;
  padding-bottom: 0;
}

@media (max-width: 991px) {
    .main-menu-container.w-container {
      max-width: 470px;
    }
}

@media (max-width: 767px) {
  .narrowBox {
    padding-left: 20px;
    padding-right: 20px;
    margin: 15px auto;
  }
}

    </style>
</head>
<body class="body" onload="init_signUp();">
<div>
    <div class="wrapper">
        <div data-collapse="medium" data-animation="over-right" data-duration="400" data-ix="header" data-doc-height="1"
             class="main-menu w-nav" style="opacity: 1; transition: opacity 500ms;">
            <div class="main-menu-container w-container"><a href="https://www.thesimple.com/flatbill" class="brand w-nav-brand"><img
                    src="https://uploads-ssl.webflow.com/594acebf03437f1a14504b3f/594bce73dfb4c87a381aae1d_simple-logo-high-res%20(1).png"
                    width="1899.5"
                    srcset="https://uploads-ssl.webflow.com/594acebf03437f1a14504b3f/594bce73dfb4c87a381aae1d_simple-logo-high-res%20(1)-p-500.png 500w, https://uploads-ssl.webflow.com/594acebf03437f1a14504b3f/594bce73dfb4c87a381aae1d_simple-logo-high-res%20(1)-p-800.png 800w, https://uploads-ssl.webflow.com/594acebf03437f1a14504b3f/594bce73dfb4c87a381aae1d_simple-logo-high-res%20(1).png 3799w"
                    sizes="(max-width: 479px) 36vw, 110px" class="logo"></a>
                <div class="text-block-5"><strong>Flat Bill</strong></div>
                <div class="navbar-spacer w-hidden-main"></div>
                <nav role="navigation" class="nav-menu w-nav-menu">
                    <div class="mobile-menu-header w-hidden-main"></div>
                </nav>
                <div class="menu-button w-nav-button">
                    <div class="hamburger-icon w-icon-nav-menu"></div>
                </div>
                <nav role="navigation" class="nav-menu w-nav-menu">
                    <div class="mobile-menu-header w-hidden-main"></div>
                    <div class="navbar-spacer w-hidden-medium w-hidden-small w-hidden-tiny"></div>
                    <a href="https://www.thesimple.com/flatbill"
                        class="nav-link w-nav-link"
                        style="max-width: 940px;">Home</a>
                    <a href="https://flatbill.thesimple.com/site/signup"
                        target="_blank" class="nav-link w-nav-link"
                        style="max-width: 940px; white-space: nowrap;">Sign Up</a>
                    <a target="_blank"
                        href="https://www.thesimple.com/flatbill-faqs"
                        class="nav-link w-nav-link"
                        style="max-width: 940px;">FAQs</a><a
                        target="_blank" href="http://www.thesimple.com/legal/flatbill-terms-and-conditions"
                        class="nav-link w-nav-link" style="max-width: 940px;">Legal</a></nav>
            </div>
            <div class="w-nav-overlay" data-wf-ignore=""></div>
        </div>

        <div class="container">
            <div class="narrowBox">
                <div id="section-header">
                    <div class="section-header-main">
                        <label>Thanks for your interest in signing up for the Simple Flat Bill! </label></div>
                    <div class="section-header-sub">
                        <label>
                            Before continuing, please determine if your home wiring is compatible with the Simple thermostat:
                            <a href="https://www.thesimple.com/compatibility" target="_blank">https://www.thesimple.com/compatibility</a>
                        </label>
                    </div>
                </div>
                <form>
                    <div id="section-subheader">
                        <label class="effieldlabel">
                            The Flat Bill plan only works for homes with Wi-Fi and central AC.
                        </label>
                    </div>

                    <div id="section-thermostatInfo" class="tab">
                        <div class="effield">
                            <div class="col-9">
                                <label class="effieldlabel" for="signUp_has_wifi_100_pct">
                                    Do you have Wi-Fi in your home?
                                </label>
                            </div>
                            <div class="col-3">
                                <select class="selectFirstPage" id="signUp_has_wifi_100_pct" required onchange="validateWiFi_AC();validate_first_page_info();">
                                    <option value="">---</option>
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="effield">
                            <div class="col-9">
                                <label class="effieldlabel" for="signUp_has_central_ac">
                                    Do you have central AC?
                                </label>
                            </div>
                            <div class="col-3">
                                <select class="selectFirstPage" id="signUp_has_central_ac" required onchange="validateWiFi_AC();validate_first_page_info();">
                                    <option value="">---</option>
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="effield">
                            <div class="col-9">
                                <label class="effieldlabel" for="signUp_total_thermostats_needed">
                                    How many thermostats do you need in your home?
                                </label>
                            </div>
                            <div class="col-3">
                                <select class="selectFirstPage" id="signUp_total_thermostats_needed" required disabled onchange="validate_first_page_info()">
                                    <option value="">---</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            </div>
                        </div>
                        <div class="effield">
                            <div class="col-9">
                                <label class="effieldlabel" for="signUp_thermostat_color">
                                    What color thermostat would you like?
                                </label>
                            </div>
                            <div class="col-3">
                                <select class="selectFirstPage" id="signUp_thermostat_color" required disabled onchange="validate_first_page_info()">
                                    <option value="">---</option>
                                    <option value="white">White</option>
                                    <option value="black">Black</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="section-userInfo" class="tab">
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_firstName">
                                First Name:
                            </label>
                            <label id="error-signUp_utility_firstName" class="lbl-error-msg"></label>
                            <input type="text" class="" id="signUp_utility_firstName" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">

                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_lastName">
                                Last Name:
                            </label>
                            <label id="error-signUp_utility_lastName" class="lbl-error-msg"></label>
                            <input type="text" class="" id="signUp_utility_lastName" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">

                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_location_address1">
                                Address 1:
                            </label>
                            <label id="error-signUp_utility_location_address1" class="lbl-error-msg"></label>
                            <input type="text" class="" id="signUp_utility_location_address1" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">

                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_location_address2">
                                Address 2:
                            </label>
                            <label id="error-signUp_utility_location_address2" class="lbl-error-msg"></label>
                            <input type="text" class="" id="signUp_utility_location_address2" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">
                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_location_city">
                                City:
                            </label>
                            <label id="error-signUp_utility_location_city" class="lbl-error-msg"></label>
                            <input type="text" class="" id="signUp_utility_location_city" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">

                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_location_state">
                                State:
                            </label>
                            <label id="error-signUp_utility_location_state" class="lbl-error-msg"></label>
                            <select class="rawcontrol" id="signUp_utility_location_state" required onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);"><option value="">---</option><option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option><option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option><option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VT">Vermont</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option><option value="DC">District of Columbia</option></select>
                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_location_zipcode">
                                Zip Code:
                            </label>
                            <label id="error-signUp_utility_location_zipcode" class="lbl-error-msg"></label>
                            <input type="text" class="" id="signUp_utility_location_zipcode" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">
                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_phone">
                                Phone:
                            </label>
                            <label id="error-signUp_utility_phone" class="lbl-error-msg"></label>
                            <input type="tel" class="" id="signUp_utility_phone" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">

                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_utility_email">
                                Email:
                            </label>
                            <label id="error-signUp_utility_email" class="lbl-error-msg"></label>
                            <input type="email" class="" id="signUp_utility_email" required  value="" maxlength="30" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">

                        </div>
                        <div class="effield">
                            <label class="effieldlabel formLabel" for="signUp_mostExcited">
                                What are you most excited about for the offer?
                            </label>
                            <label id="error-signUp_mostExcited" class="lbl-error-msg"></label>
                            <select class="rawcontrol" id="signUp_mostExcited"  required onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">
                                <option value="">---</option>
                                <option value="steady bills">Having a steady bill</option>
                                <option value="auto-pay">Auto-payments</option>
                                <option value="save money">Saving money</option>
                                <option value="free ts">A free smart thermostat</option>
                                <option value="other">Other</option>
                            </select>
                        </div>


                    </div>
                    <div id="div-goToNextPage" style="clear: both">
                        <div style="clear: both;">
                            <div style="float:right;">
                                <div id="btnNextPageContainer" class="effield efbuttonfield disabled">
                                    <div>
                                        <button type="button" class="button-primary rawcontrol disabled" id="btnNextPage" disabled onclick="nextPrev()">
                                            <span style="vertical-align: top;">Next</span>
                                        </button>
                                    </div>
                                </div>
                                <!--<button type="button" id="btnTogglePage" onclick="nextPrev()">Next</button>-->
                            </div>
                        </div>
                    </div>
                    <div id="section-LinkUtility">
                        <!-- Link to utility account -->
                        <div class="col-6">
                            <div class="effield" id="div-link-utility-label">
                                <label class="effieldlabel">
                                    Please link your utility account:
                                </label>
                            </div>
                            <div class="effield" id="div-link-utility-error">
                                <label class="effieldlabel">
                                    (Account not linked)
                                </label>
                            </div>
                        </div>
                        <div class="col-6">
                            <div id="btnLinkUtilityContainer" class="effield efbuttonfield">
                                <div>
                                    <button type="button" class="button-primary rawcontrol" id="btnLinkUtilityAccount" onclick="link_utility_account()">
                                        <span style="vertical-align: top;">Link your account</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!--<button id="btnLinkUtilityAccount" onclick="link_utility_account();" class="light-button" disabled>Link your utility account</button>-->
                    </div>
                    <div id="section-TC" style="clear: both;">
                        <div class="effield">
                            <input type="checkbox" class="" id="signUp_legal_accepted"  value="on" onchange="toggle_enroll_button(this);" onblur="toggle_enroll_button(this);">
                            <label class="effieldlabel efCheckboxStyleLabel" for="signUp_legal_accepted">
                                I agree to the <a href="https://www.thesimple.com/legal/flatbill-terms-and-conditions">Terms and Conditions</a>
                                and <a href="https://www.thesimple.com/legal/privacy">Privacy Policy</a>.
                            </label>
                        </div>
                    </div>
                </form>
                <!--<div id="section-LinkUtility" style="padding:50px 0px 50px">-->
                    <!--&lt;!&ndash; Link to utility account &ndash;&gt;-->
                    <!--<button id="btnLinkUtilityAccount" onclick="link_utility_account();" class="light-button">Link your utility account</button>-->
                <!--</div>-->
                <!-- The Modal -->
                <div id="myModal" class="modal">

                  <!-- Modal content -->
                  <div class="modal-content">
                    <!-- <span class="close" onclick="close_modal();">&times;</span>
                    <label class="effieldlabel" style="margin-bottom:20px">
                        Confirm the details associated your utility account:
                    </label> -->

                    <div class="effield" id="utility_div">
                        <label class="effieldlabel" for="signUp_utility_provider">
                              Your Utility:
                        </label>
                        <select class="rawcontrol" id="signUp_utility_provider" required onchange="check_utility();">
                            <option value="Southern California Edison">Southern California Edison</option>
                            <option value="PG&E">PG&E</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="effield">
                        <label class="effieldlabel" for="signUp_utility_login_userId">
                            Login UserID/Email:
                        </label>
                        <input type="text" class="" id="signUp_utility_login_userId" required value="" maxlength="30" onkeyup="toggle_utility_done_button();">
                    </div>

                    <div class="effield">
                        <label class="effieldlabel" for="signUp_utility_password">
                            Password:
                        </label>
                        <input type="password" class="" id="signUp_utility_password" required value="" maxlength="30" onkeyup="toggle_utility_done_button();">
                    </div>

                    <div class="effield">
                        <label class="effieldlabel_password" for="signUp_utility_password_repeat">
                            Password (repeat):
                        </label>
                        <label id="do_not_match_label" class="effieldlabel_password_match" style="margin-left:2px"></label>
                        <input type="password" class="" id="signUp_utility_password_repeat" required value="" maxlength="30" onkeyup="toggle_utility_done_button();">
                    </div>
                    <!--<div style="padding:20px 0px 0px">-->
                        <!--<button id="myBtn" onclick="close_modal();" class="light-button">Link</button>-->
                    <!--</div>-->
                      <div id="btnModalLinkContainer" class="effield efbuttonfield disabled">
                        <div>
                            <button type="button" id="btn_utility_done" onclick="close_modal();toggle_enroll_button(this);clear_link_account_error();" disabled>
                                <span style="vertical-align: top;">Done</span>
                            </button>

                        </div>
                      </div>
                      <div id="btnModalCancelContainer" class="effield efbuttonfield">
                        <div>
                            <button type="button" id="btn_utility_cancel" onclick="close_modal();">
                                <span style="vertical-align: top;">Cancel</span>
                            </button>
                        </div>
                      </div>
                  </div>

                </div>

                <!-- Cancel and Submit buttons -->
                <div id="divButtonSubmissions_signUp" align="center">
                    <div id="btnEnrollContainer" class="effield efbuttonfield disabled">
                        <div>
                            <button type="button" class="button-primary rawcontrol disabled" id="btn_signup_enroll" disabled onclick="submit_signUp()">
                                <span style="vertical-align: top;">Enroll</span>
                            </button>
                        </div>
                    </div>
                    <div id="btnCancelContainer" class="effield efbuttonfield" onclick="submit_cancel()">
                            <button type="button" class="button-primary rawcontrol" id="btn_signup_cancel" onclick="submit_cancel()">
                                <span style="vertical-align: top;">Cancel</span>
                            </button>
                    </div>

                  <!--<button id="btn_signup_enroll1" onclick="submit_signUp();" class="disabled-button" style="font-style:bold" disabled>Enroll</button>-->
                  <!--<button id="btn_signup_cancel1" onclick="submit_cancel();" class="light-button" style="margin-left:50px">Cancel</button>-->

                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" type="text/javascript" intergrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://uploads-ssl.webflow.com/594acebf03437f1a14504b3f/js/webflow.169bea37d.js" type="text/javascript"></script>
<script>
function showErrorMessage(element, msg) {
        if (element === "signUp_legal_accepted" || element === "btn_utility_done") return;
    var error_message = document.getElementById("error-" + element);
    if (msg === "") {
        error_message.style.display = "none";
    } else {
        error_message.style.display = "inline";
        error_message.innerHTML = msg;
    }
}

function validateWiFi_AC() {
    var hasWifi = document.getElementById('signUp_has_wifi_100_pct');
    var hasAC = document.getElementById('signUp_has_central_ac');

    if (hasWifi.options[hasWifi.selectedIndex].value === "yes" &&
    hasAC.options[hasAC.selectedIndex].value === "yes" &&
    !hasWifi.disabled && !hasAC.disabled) {
        document.getElementById('signUp_total_thermostats_needed').disabled = false;
        document.getElementById('signUp_thermostat_color').disabled = false;
    } else {
        document.getElementById('signUp_total_thermostats_needed').disabled = true;
        document.getElementById('signUp_thermostat_color').disabled = true;
    }
}

var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form ...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  // ... and fix the Previous/Next buttons:
  // if (n == 0) {
  //   document.getElementById("prevBtn").style.display = "none";
  // } else {
  //   document.getElementById("prevBtn").style.display = "inline";
  // }
  if (n == (x.length - 1)) {
    document.getElementById("btnNextPage").style.display = "none";
    document.getElementById("section-subheader").style.display = "none";
    document.getElementById("section-header").innerHTML = "<label>Fill in the details associated with your utility account:</label>";
    document.getElementById("section-header").style.borderBottom = "none";
    document.getElementById("section-header").style.marginBottom = "20px";

    document.getElementById("section-TC").style.display = "block";
    document.getElementById("section-LinkUtility").style.display = "block";
    document.getElementById("divButtonSubmissions_signUp").style.display = "block";
    document.getElementById("btnNextPageContainer").style.display = "none";

  } else {
    document.getElementById("btnNextPage").style.display = "block";
    document.getElementById("section-header").style.display = "block";
    document.getElementById("section-subheader").style.display = "block";
    document.getElementById("section-TC").style.display = "none";
    document.getElementById("section-LinkUtility").style.display = "none";
    document.getElementById("divButtonSubmissions_signUp").style.display = "none";
        document.getElementById("btnNextPageContainer").style.display = "block";

  }
}

function nextPrev() {
    n = 1;
    // This function will figure out which tab to display
    var x = document.getElementsByClassName("tab");
    // Exit the function if any field in the current tab is invalid:
    if (!validateForm()) return false;
    // Hide the current tab:
    x[currentTab].style.display = "none";
    // Increase or decrease the current tab by 1:
    currentTab = currentTab + n;
    // if you have reached the end of the form... :
    if (currentTab >= x.length) {
        //...the form gets submitted:
        document.getElementById("regForm").submit();
        return false;
    }
    // Otherwise, display the correct tab:
    showTab(currentTab);
}

function validateForm() {
  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  // A loop that checks every input field in the current tab:
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
    if (y[i].value == "") {
      // add an "invalid" class to the field:
      y[i].className += " invalid";
      // and set the current valid status to false:
      valid = false;
    }
  }
  return valid; // return the valid status
}

</script>
</body>
</html>